{"mappings":"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","sources":["src/js/services/loadingcheck-main-page.js","src/js/bestsellers.js","src/js/categories.js","src/js/services/dark-theme.js"],"sourcesContent":["import { topBooksRequest } from '../requests/apiRequests';\nimport { authCheck } from '../authorization';\nimport { loadTopBooksOnClick } from '../bestsellers';\n\nwindow.addEventListener('DOMContentLoaded', event => {\n  const layoutElement = document.querySelector('.layout');\n  layoutElement.classList.add('is-loading');\n\n  Promise.all([authCheck(), topBooksRequest(), loadTopBooksOnClick()]).then(\n    () => {\n      const loadingElement = document.querySelector('.js-loading');\n      const layoutElement = document.querySelector('.layout');\n\n      loadingElement.classList.add('loading-overlay-hide');\n      layoutElement.classList.remove('is-loading');\n    }\n  );\n});\n","const refs = {\n  bestSellersGalery: document.querySelector('.bestsellers'),\n};\n\nimport { topBooksRequest, categoryRequest } from './requests/apiRequests';\nimport Notiflix from 'notiflix';\n\n// ===========================================================================\n\nwindow.addEventListener('DOMContentLoaded', loadTopBooksOnClick);\n\nexport async function loadTopBooksOnClick() {\n  try {\n    topBooksRequest()\n      .then(data => {\n        if (data.length === 0 || data === undefined) {\n          Notiflix.Notify.failure(\n            \"Sorry, we didn't find anything according to your request.\"\n          );\n          return;\n        }\n\n        refs.bestSellersGalery.insertAdjacentHTML(\n          'beforeend',\n          createTopBookCardList(data)\n        );\n      })\n      .catch(err => console.log(err));\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// ===========================================================================\n\nrefs.bestSellersGalery.addEventListener('click', onCattegoryButtonElClick);\n\nexport async function onCattegoryButtonElClick(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  const cattegoryName = event.target.name;\n\n  try {\n    categoryRequest(cattegoryName)\n      .then(data => {\n        if (data.length === 0 || data === undefined) {\n          Notiflix.Notify.failure(\n            \"Sorry, we didn't find anything according to your request.\"\n          );\n          return;\n        }\n\n        refs.bestSellersGalery.innerHTML = '';\n        createAllCategoryList(data, cattegoryName);\n      })\n      .catch(err => console.log(err));\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n// ===========================================================================\nwindow.addEventListener('resize', hideBooks);\n\nfunction hideBooks() {\n  const listCategoriesEl = Array.from(\n    document.querySelectorAll('.bestsellers-list')\n  );\n  if (window.innerWidth < 768) {\n    listCategoriesEl.forEach(item => {\n      for (let i = 0; i < item.children.length; i += 1) {\n        if (i === 0) {\n          item.children[i].hidden = false;\n          continue;\n        }\n        item.children[i].hidden = true;\n      }\n    });\n  }\n  if (window.innerWidth >= 768 && window.innerWidth < 1440) {\n    listCategoriesEl.forEach(item => {\n      for (let i = 0; i < item.children.length; i += 1) {\n        if (i <= 2) {\n          item.children[i].hidden = false;\n          continue;\n        }\n        item.children[i].hidden = true;\n      }\n    });\n  }\n  if (window.innerWidth >= 1440) {\n    listCategoriesEl.forEach(item => {\n      for (let i = 0; i < item.children.length; i += 1) {\n        item.children[i].hidden = false;\n      }\n    });\n  }\n}\n\n// ===========================================================================\n\nexport function createTopBookCardList(arr) {\n  return arr\n    .map(({ list_name, books }) => {\n      return `<div class=\"bestsellers-card\">\n            <h2 class=\"bestsellers-title-book\">${list_name}</h2>\n            <ul class=\"bestsellers-list\">\n            ${makeMarkupBook(books)}\n                </ul>\n                <button class=\"bestsellers-btn\" name=\"${list_name}\" type=\"button\">See more</button>\n            </div>`;\n    })\n    .join('');\n}\n\nexport function makeMarkupBook(books) {\n  const markup = books\n    .map(({ _id, book_image, title, author }) => {\n      return ` \n      <li class=\"bestsellers-card-item\" id=\"${_id}\">\n      <a href=\"\" class=\"bestsellers-link project-transit\" id=\"${_id}\"> \n        <!-- box-menu -->\n        <div class=\"bestsellers-box-menu\">\n            <p class = \"bestsellers-overlay\" id=\"${_id}\">Quick View</p>  \n            <img class=\"gallery__image\" src=\"${book_image}\" alt=\"${title}\" id=\"${_id}\">\n            </div>\n         <!-- box-menu -->\n         <div class=\"text-box\">\n          <h3 class=\"book-name\" id=\"${_id}\">${title} </h3>\n          <p class=\"author\" id=\"${_id}\">${author}</p>\n          </div>\n          </a>\n         </li>\n        `;\n    })\n    .join('');\n  return markup;\n}\n\n// ===========================================================================\n\nexport function createAllCategoryList(data, cattegoryName) {\n  refs.bestSellersGalery.innerHTML = `<h2 class=\"bestsellers-title\">${changeColorStyleInTitle(\n    cattegoryName\n  )}</h2>\n                  <div class=\"bestsellers-category-item\" name=\"${cattegoryName}\">\n                  <ul class=\"category-book-list\">\n                 ${makeMarkupBook(data)}\n                  </ul>\n                  </div>`;\n}\n// ===========================================================================\nexport function changeColorStyleInTitle(category) {\n  const titleToArray = category.trim().split(' ');\n  const lastWord = titleToArray[titleToArray.length - 1];\n  const stringExceptLastWord = titleToArray\n    .slice(0, titleToArray.length - 1)\n    .join(' ');\n  const stringFinal =\n    stringExceptLastWord +\n    ` <span class=\"bestsellers-title-span\">${lastWord}</span>`;\n  return stringFinal;\n}\n","import { categoryRequest } from './requests/apiRequests';\nimport { changeColorStyleInTitle, createAllCategoryList } from './bestsellers';\nimport Notiflix from 'notiflix';\n\nconst list = document.querySelector('.category-list');\nconst categoryTitle = document.querySelector('.bestsellers-title');\nconst bestSellersGalery = document.querySelector('.bestsellers');\n\nexport function category() {\n  fetch('https://books-backend.p.goit.global/books/category-list')\n    .then(response => response.json())\n    .then(data => {\n      const arr = [];\n      for (const item of data) {\n        const values = item.list_name;\n        arr.push(values);\n      }\n\n      // console.log(arr);\n\n      const markup = arr\n        .map(item => {\n          return `<li class=\"category-item\">\n        <a class=\"category-link\" href=\"#\">${item}</a>\n        </li>`;\n        })\n        .join('');\n\n      list.insertAdjacentHTML('beforeend', markup);\n      categoryListener();\n    })\n    .catch(error => {\n      console.error('Сталася помилка при запиті:', error);\n    });\n}\n\nfunction categoryListener() {\n  list.addEventListener('click', handleCategoryClick);\n}\n\nfunction handleCategoryClick(event) {\n  event.preventDefault();\n  const target = event.target;\n\n  if (target.classList.contains('category-link')) {\n    const categoryName = target.textContent;\n\n    const categoryItems = document.querySelectorAll('.category-item');\n    categoryItems.forEach(item => {\n      item.classList.remove('active');\n    });\n\n    // Добавление класса 'active' к текущему пункту меню\n    target.parentNode.classList.add('active');\n    if (target.textContent == 'All categories') {\n      location.reload();\n      // categoryTitle.innerHTML = `Best Sellers Books`;\n      // loadTopBooksOnClick();\n    } else {\n      categoryTitle.innerHTML = `${changeColorStyleInTitle(categoryName)}`;\n      try {\n        categoryRequest(categoryName)\n          .then(data => {\n            if (data.length === 0 || data === undefined) {\n              Notiflix.Notify.failure(\n                \"Sorry, we didn't find anything according to your request.\"\n              );\n              return;\n            }\n\n            bestSellersGalery.innerHTML = '';\n            createAllCategoryList(data, categoryName);\n          })\n          .catch(err => console.log(err));\n      } catch (error) {\n        console.log(error.message);\n      }\n    }\n  }\n}\n","import { category } from '../categories';\n\ncategory();\n\nconst refs = {\n  bodyEl: document.querySelector('.main-js'),\n  headerEl: document.querySelector('.header-section'),\n  headerNavLinkEl: document.querySelector('.shopping'),\n  logoLightEl: document.querySelector('.light_icon'),\n  logoDarkEl: document.querySelector('.dark_icon'),\n  titleEl: document.querySelector('.bestsellers-title'),\n  jsCategoryListEl: document.querySelector('.js-category-list'),\n  footerEl: document.querySelector('.footer-js'),\n  logoFooterLightEl: document.querySelector('.light_icon_footer'),\n  logoFooterDarkEl: document.querySelector('.dark_icon_footer'),\n  bookNameEl: document.querySelector('.bestsellers'),\n  aboutTeamEL: document.querySelector('.about-team-window'),\n  aboutBookModalEl: document.querySelector('.about-book-modal'),\n};\n\nconst arrayEl = [\n  refs.bodyEl,\n  refs.headerEl,\n  refs.headerNavLinkEl,\n  refs.logoLightEl,\n  refs.logoDarkEl,\n  refs.titleEl,\n  refs.jsCategoryListEl,\n  refs.footerEl,\n  refs.logoFooterLightEl,\n  refs.logoFooterDarkEl,\n  refs.bookNameEl,\n  refs.aboutTeamEL,\n  refs.aboutBookModalEl,\n];\n\nconst switcherEl = document.querySelector('.js-switch-theme');\n\nconst STORAGE_KEY = 'dark-theme';\n\nswitcherEl.addEventListener('click', onClick);\n\nonLoadDarkTheme();\n\n// Функція для зміни теми сторінки\nfunction onClick() {\n  arrayEl.map(element => element.classList.toggle('dark-theme'));\n\n  if (localStorage.getItem(STORAGE_KEY) === 'true') {\n    localStorage.removeItem(STORAGE_KEY);\n    return;\n  }\n\n  localStorage.setItem(STORAGE_KEY, true);\n}\n\n// Функція для відображення даних зі сховища при перезавантаженні сторінки\nfunction onLoadDarkTheme() {\n  const value = localStorage.getItem(STORAGE_KEY);\n  if (value) {\n    switcherEl.setAttribute('checked', true);\n    arrayEl.map(element => element.classList.add('dark-theme'));\n  }\n}\n"],"names":["$1C8nL","parcelRequire","$cba43eba05963282$var$refs","bestSellersGalery","document","querySelector","async","$cba43eba05963282$export$11ea22bc3d4d00db","topBooksRequest","then","data","length","undefined","insertAdjacentHTML","map","list_name","books","$cba43eba05963282$export$d37bd98c37b31f0d","join","$parcel$interopDefault","$7Y9D8","Notify","failure","catch","err","console","log","error","message","_id","book_image","title","author","$cba43eba05963282$export$461df0cd4992043c","cattegoryName","innerHTML","$cba43eba05963282$export$e69435ba21043376","category","titleToArray","trim","split","lastWord","slice","window","addEventListener","event","target","nodeName","name","categoryRequest","listCategoriesEl","Array","from","querySelectorAll","innerWidth","forEach","item","i","children","hidden","classList","add","Promise","all","$czhBR","authCheck","loadingElement","layoutElement","remove","$f3b06000f9b46fbb$var$list","$f3b06000f9b46fbb$var$categoryTitle","$f3b06000f9b46fbb$var$bestSellersGalery","$f3b06000f9b46fbb$var$handleCategoryClick","preventDefault","contains","categoryName","textContent","parentNode","location","reload","fetch","response","json","arr","item1","values","push","markup","$390a81f5635fef21$var$refs","bodyEl","headerEl","headerNavLinkEl","logoLightEl","logoDarkEl","titleEl","jsCategoryListEl","footerEl","logoFooterLightEl","logoFooterDarkEl","bookNameEl","aboutTeamEL","aboutBookModalEl","$390a81f5635fef21$var$arrayEl","$390a81f5635fef21$var$switcherEl","element","toggle","localStorage","getItem","removeItem","setItem","setAttribute"],"version":3,"file":"index.1cbe2c63.js.map"}