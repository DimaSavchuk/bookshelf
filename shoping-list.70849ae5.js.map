{"mappings":"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","sources":["src/js/services/loadingcheck-shopping-list.js","src/js/services/localstorage-service.js","src/js/selected-books.js","src/js/services/pagination-service.js","<<jsx-config-pragma.js>>","src/js/services/dark-theme-shopping.js"],"sourcesContent":["import { authCheck } from '../authorization';\n\nwindow.addEventListener('DOMContentLoaded', event => {\n  const layoutElement = document.querySelector('.layout');\n  layoutElement.classList.add('is-loading');\n\n  Promise.all([authCheck()]).then(() => {\n    const loadingElement = document.querySelector('.js-loading');\n    const layoutElement = document.querySelector('.layout');\n\n    loadingElement.classList.add('loading-overlay-hide');\n    layoutElement.classList.remove('is-loading');\n  });\n});\n","const save = (key, value) => {\n    try {\n      const serializedState = JSON.stringify(value);\n      localStorage.setItem(key, serializedState);\n    } catch (error) {\n      console.error('Set state error: ', error.message);\n    }\n  };\n  \n  const load = key => {\n    try {\n      const serializedState = localStorage.getItem(key);\n      return serializedState === null ? [] : JSON.parse(serializedState);\n    } catch (error) {\n      console.error('Get state error: ', error.message);\n    }\n  };\n\n  export { save, load };","import { save, load } from './services/localstorage-service';\nimport { STORAGE_KEY } from './about-book';\nimport PaginationService from './services/pagination-service';\n\nlet booksFromLocalStorage;\nconst paginationService = new PaginationService();\n\nconst refs = {\n  sellectedBooksList: document.querySelector('.sellected-books-list'),\n  noBooksSection: document.querySelector('.books-not-available'),\n  shopPage:document.querySelector(\".js-shop\"),\n  homePage:document.querySelector(\".js-home\"),\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  InitializeShoppingList();\n});\n\nwindow.onresize = rerenderBooksOnResize;\n\nfunction InitializeShoppingList() {\nrefs.homePage.classList.remove(\"current\");\nrefs.shopPage.classList.add(\"current\");\n  booksFromLocalStorage = load(STORAGE_KEY);\n\n  if (isBooksAvailable()) {\n    renderBooks();\n    hideEmptyMessage();\n    paginationService.setPagination(1);\n  } else {\n    paginationService.hidePaginationContainer();\n  }\n}\n\nconst isBooksAvailable = () => {\n  return booksFromLocalStorage && booksFromLocalStorage.length > 0;\n};\n\nfunction hideEmptyMessage() {\n  refs.noBooksSection.style.display = 'none';\n}\n\nfunction showEmptyMessage() {\n  refs.noBooksSection.style.display = 'block';\n}\n\nfunction renderBooks() {\n  let markupBooks = booksFromLocalStorage\n    .map(\n      ({\n        _id,\n        title,\n        author,\n        book_image,\n        description,\n        list_name,\n        buy_links,\n      }) => {\n        let amazonLink = buy_links.find(book => book.name == 'Amazon').url;\n        let appleLink = buy_links.find(book => book.name == 'Apple Books').url;\n        let bookshopLink = buy_links.find(book => book.name == 'Bookshop').url;\n        return `<li id=\"${_id}\" class=\"book-item\">\n            <img src=\"${book_image}\" alt=\"${title}\" class=\"book-image\" />\n            <div class=\"book-info\">\n            <div class=\"book-style\">\n            <h2 class=\"book-title\">${title}</h2>\n            \n            <div>\n            <button id=\"${_id}\" class=\"delete-book-button\"></button>\n            </div>\n            </div>\n            \n            <p class=\"book-category\">${list_name}</p>\n            <p class=\"book-description\">${description}</p>\n            <div class=\"book-styles\">\n            <h3 class=\"book-author\">${author}</h3>\n            <div class=\"trading-platforms-list list\">\n            <a href=\"\"></a>\n            <a href=\"${amazonLink}\" class=\"amazon\" target=\"_blank\" rel=\"noreferrer noopener\"></a>\n            <a href=\"${appleLink}\" class=\"apple\" target=\"_blank\" rel=\"noreferrer noopener\"></a>\n            <a href=\"${bookshopLink}\" class=\"shop\" target=\"_blank\" rel=\"noreferrer noopener\"></a>\n            </div>\n            </div>\n            </div>\n        </li>`;\n      }\n    )\n    .join('');\n  refs.sellectedBooksList.insertAdjacentHTML('beforeend', markupBooks);\n  bindDeleteButtonsEvents();\n}\n\nfunction bindDeleteButtonsEvents() {\n  let deleteButtonRefs = document.querySelectorAll('.delete-book-button');\n  deleteButtonRefs.forEach(book => book.addEventListener('click', deleteBook));\n}\n\nfunction deleteBook(e) {\n  const bookId = e.srcElement.id;\n  deleteBookFromLocalStorage(bookId);\n  deleteBookFromList(bookId);\n\n  if (isBooksAvailable()) {\n    rerenderBooks();\n  } else {\n    showEmptyMessage();\n    paginationService.hidePaginationContainer();\n  }\n}\n\nfunction rerenderBooks() {\n  clearPage();\n  renderBooks();\n  paginationService.setPagination(paginationService.currentPage);\n}\n\nfunction deleteBookFromLocalStorage(bookId) {\n  booksFromLocalStorage = booksFromLocalStorage.filter(\n    book => book._id !== bookId\n  );\n  save(STORAGE_KEY, booksFromLocalStorage);\n}\n\nfunction deleteBookFromList(bookId) {\n  const bookElement = document.getElementById(bookId.toString());\n  bookElement.remove();\n}\n\nfunction clearPage() {\n  refs.sellectedBooksList.innerHTML = '';\n  paginationService.clearPaginationButtons();\n}\n\nfunction rerenderBooksOnResize() {\n  let newPaginationLimit = window.screen.width >= 768 ? 3 : 4;\n\n  if (\n    isBooksAvailable() &&\n    newPaginationLimit != paginationService.paginationLimit\n  ) {\n    paginationService.paginationLimit = newPaginationLimit;\n    rerenderBooks();\n  }\n}\n","export default class PaginationService {\n    constructor() {\n      this.currentPage = 1;\n      this.paginationLimit = window.screen.width >= 768 ? 3 : 4;;\n      this.pageCount;\n      this.listItems;\n      this.paginationNumbers = document.getElementById('pagination-numbers');\n      this.paginatedList = document.getElementById('paginated-list');\n      this.nextButton = document.getElementById('next-button');\n      this.prevButton = document.getElementById('prev-button');\n      this.paginationContainer = document.getElementById('pagination-container');\n    }\n\n     setPagination(page) {\n        this.listItems = this.paginatedList.querySelectorAll('li');\n        this.pageCount = Math.ceil(this.listItems.length / this.paginationLimit);\n      \n        if (this.pageCount < 2) {\n          this.hidePaginationContainer();\n          return;\n        }\n      \n        if (page > this.pageCount) {\n          page = this.pageCount;\n        }\n      \n        this.getPaginationNumbers();\n        this.setCurrentPage(page);\n        this.setNextAndPreviousButtons();\n      \n        document.querySelectorAll('.pagination-number').forEach(button => {\n          const pageIndex = Number(button.getAttribute('page-index'));\n          if (pageIndex) {\n            button.addEventListener('click', () => {\n                this.setCurrentPage(pageIndex);\n            });\n          }\n        });\n      }\n      \n       hidePaginationContainer = () => {\n        this.paginationContainer.style.display = 'none';\n      }\n      \n       getPaginationNumbers = () => {\n        for (let i = 1; i <= this.pageCount; i++) {\n            this.appendPageNumber(i);\n        }\n      };\n      \n       appendPageNumber = index => {\n        const pageNumber = document.createElement('button');\n        pageNumber.className = 'pagination-number';\n        pageNumber.innerHTML = index;\n        pageNumber.setAttribute('page-index', index);\n        pageNumber.setAttribute('aria-label', 'Page ' + index);\n        this.paginationNumbers.appendChild(pageNumber);\n      };\n      \n       setCurrentPage = pageNum => {\n        this.currentPage = pageNum;\n      \n        this.handleActivePageNumber();\n        this.handlePageButtonsStatus();\n      \n        const prevRange = (pageNum - 1) * this.paginationLimit;\n        const currRange = pageNum * this.paginationLimit;\n      \n        this.listItems.forEach((item, index) => {\n          item.style.display = 'none';\n          if (index >= prevRange && index < currRange) {\n            item.style.display = 'flex';\n          }\n        });\n      };\n      \n       setNextAndPreviousButtons() {\n        this.prevButton.addEventListener('click', () => {\n            this.setCurrentPage(this.currentPage - 1);\n        });\n        this.nextButton.addEventListener('click', () => {\n            this.setCurrentPage(this.currentPage + 1);\n        });\n      }\n      \n       handleActivePageNumber = () => {\n        document.querySelectorAll('.pagination-number').forEach(button => {\n          button.classList.remove('active');\n      \n          const pageIndex = Number(button.getAttribute('page-index'));\n          if (pageIndex == this.currentPage) {\n            button.classList.add('active');\n          }\n        });\n      };\n      \n       disableButton = button => {\n        button.classList.add('disabled');\n        button.setAttribute('disabled', true);\n      };\n      \n       enableButton = button => {\n        button.classList.remove('disabled');\n        button.removeAttribute('disabled');\n      };\n      \n       handlePageButtonsStatus = () => {\n        if (this.currentPage === 1) {\n            this.disableButton(this.prevButton);\n        } else {\n            this.enableButton(this.prevButton);\n        }\n        if (this.pageCount === this.currentPage) {\n            this.disableButton(this.nextButton);\n        } else {\n            this.enableButton(this.nextButton);\n        }\n      };   \n      \n      clearPaginationButtons = () => {\n        this.paginationNumbers.innerHTML = '';\n      };\n  }\n",null,"const refs = {\n  bodyShoppingEl: document.querySelector('.shopping-dark-js'),\n};\n\n// const arrayEl = [\n//   refs.bodyEl,\n//   refs.headerEl,\n//   refs.headerNavLinkEl,\n//   refs.logoLightEl,\n//   refs.logoDarkEl,\n//   refs.titleEl,\n//   refs.jsCategoryListEl,\n//   refs.footerEl,\n//   refs.logoFooterLightEl,\n//   refs.logoFooterDarkEl,\n//   refs.bookNameEl,\n//   refs.aboutTeamEL,\n//   refs.aboutBookModalEl,\n// ];\n\nconst switcherEl = document.querySelector('.js-switch-theme');\n\nconst STORAGE_KEY = 'dark-theme';\n\nswitcherEl.addEventListener('click', onClick);\n\nonLoadDarkTheme();\n\n// Функція для зміни теми сторінки\nfunction onClick() {\n  refs.bodyShoppingEl.classList.toggle('dark-theme');\n\n  if (localStorage.getItem(STORAGE_KEY) === 'true') {\n    localStorage.removeItem(STORAGE_KEY);\n    return;\n  }\n\n  localStorage.setItem(STORAGE_KEY, true);\n}\n\n// Функція для відображення даних зі сховища при перезавантаженні сторінки\nfunction onLoadDarkTheme() {\n  const value = localStorage.getItem(STORAGE_KEY);\n  if (value) {\n    switcherEl.setAttribute('checked', true);\n    refs.bodyShoppingEl.classList.add('dark-theme');\n  }\n}\n"],"names":["$ebCjK","parcelRequire","window","addEventListener","event","document","querySelector","classList","add","Promise","all","authCheck","then","loadingElement","layoutElement","remove","$4a8874b533b8a778$var$booksFromLocalStorage","$d70a6d48cf6b0886$export$a1544dad697b423d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","$8MBJY","$4a8874b533b8a778$var$paginationService","PaginationService","$parcel$interopDefault","$hKHmD","this","_this","paginationContainer","style","display","i","pageCount","appendPageNumber","index","pageNumber","createElement","className","innerHTML","setAttribute","paginationNumbers","appendChild","pageNum","currentPage","handleActivePageNumber","handlePageButtonsStatus","prevRange","paginationLimit","currRange","listItems","forEach","item","querySelectorAll","button","Number","getAttribute","_this1","removeAttribute","disableButton","prevButton","enableButton","nextButton","screen","width","getElementById","paginatedList","page","Math","ceil","length","hidePaginationContainer","getPaginationNumbers","setCurrentPage","setNextAndPreviousButtons","pageIndex","_this2","$4a8874b533b8a778$var$refs","sellectedBooksList","noBooksSection","shopPage","homePage","getItem","parse","$5ZpUA","STORAGE_KEY","$4a8874b533b8a778$var$isBooksAvailable","$4a8874b533b8a778$var$renderBooks","setPagination","onresize","newPaginationLimit","$4a8874b533b8a778$var$rerenderBooks","markupBooks","map","param","_id","title","author","book_image","description","list_name","buy_links","amazonLink","find","book","name","url","appleLink","bookshopLink","concat","join","insertAdjacentHTML","$4a8874b533b8a778$var$deleteBook","e","bookId","srcElement","id","filter","$4a8874b533b8a778$var$deleteBookFromLocalStorage","toString","$4a8874b533b8a778$var$deleteBookFromList","clearPaginationButtons","$07f299d41574847d$var$refs","bodyShoppingEl","$07f299d41574847d$var$switcherEl","$07f299d41574847d$var$STORAGE_KEY","toggle","removeItem"],"version":3,"file":"shoping-list.70849ae5.js.map"}