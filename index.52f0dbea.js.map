{"mappings":"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","sources":["src/js/services/loadingcheck-main-page.js","src/js/bestsellers.js","src/js/categories.js","src/js/services/dark-theme.js"],"sourcesContent":["import { topBooksRequest } from '../requests/apiRequests';\nimport { authCheck } from '../authorization';\nimport { loadTopBooksOnClick } from '../bestsellers';\n\nwindow.addEventListener('DOMContentLoaded', event => {\n  const layoutElement = document.querySelector('.layout');\n  layoutElement.classList.add('is-loading');\n\n  Promise.all([authCheck(), topBooksRequest(), loadTopBooksOnClick()]).then(\n    () => {\n      const loadingElement = document.querySelector('.js-loading');\n      const layoutElement = document.querySelector('.layout');\n\n      loadingElement.classList.add('loading-overlay-hide');\n      layoutElement.classList.remove('is-loading');\n    }\n  );\n});\n","const refs = {\n  bestSellersGalery: document.querySelector('.bestsellers'),\n};\n\nimport { topBooksRequest, categoryRequest } from './requests/apiRequests';\nimport Notiflix from 'notiflix';\n\n// ===========================================================================\n\nwindow.addEventListener('DOMContentLoaded', loadTopBooksOnClick);\n\nexport async function loadTopBooksOnClick() {\n  try {\n    topBooksRequest()\n      .then(data => {\n        if (data.length === 0 || data === undefined) {\n          Notiflix.Notify.failure(\n            \"Sorry, we didn't find anything according to your request.\"\n          );\n          return;\n        }\n\n        refs.bestSellersGalery.insertAdjacentHTML(\n          'beforeend',\n          createTopBookCardList(data)\n        );\n      })\n      .catch(err => console.log(err));\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\n// ===========================================================================\n\nrefs.bestSellersGalery.addEventListener('click', onCattegoryButtonElClick);\n\nexport async function onCattegoryButtonElClick(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  const cattegoryName = event.target.name;\n\n  try {\n    categoryRequest(cattegoryName)\n      .then(data => {\n        if (data.length === 0 || data === undefined) {\n          Notiflix.Notify.failure(\n            \"Sorry, we didn't find anything according to your request.\"\n          );\n          return;\n        }\n\n        refs.bestSellersGalery.innerHTML = '';\n        createAllCategoryList(data, cattegoryName);\n      })\n      .catch(err => console.log(err));\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n// ===========================================================================\nwindow.addEventListener('resize', hideBooks);\n\nfunction hideBooks() {\n  const listCategoriesEl = Array.from(\n    document.querySelectorAll('.bestsellers-list')\n  );\n  if (window.innerWidth < 768) {\n    listCategoriesEl.forEach(item => {\n      for (let i = 0; i < item.children.length; i += 1) {\n        if (i === 0) {\n          item.children[i].hidden = false;\n          continue;\n        }\n        item.children[i].hidden = true;\n      }\n    });\n  }\n  if (window.innerWidth >= 768 && window.innerWidth < 1440) {\n    listCategoriesEl.forEach(item => {\n      for (let i = 0; i < item.children.length; i += 1) {\n        if (i <= 2) {\n          item.children[i].hidden = false;\n          continue;\n        }\n        item.children[i].hidden = true;\n      }\n    });\n  }\n  if (window.innerWidth >= 1440) {\n    listCategoriesEl.forEach(item => {\n      for (let i = 0; i < item.children.length; i += 1) {\n        item.children[i].hidden = false;\n      }\n    });\n  }\n}\n\n// ===========================================================================\n\nexport function createTopBookCardList(arr) {\n  return arr\n    .map(({ list_name, books }) => {\n      return `<div class=\"bestsellers-card\">\n            <h2 class=\"bestsellers-title-book\">${list_name}</h2>\n            <ul class=\"bestsellers-list\">\n            ${makeMarkupBook(books)}\n                </ul>\n                <button class=\"bestsellers-btn\" name=\"${list_name}\" type=\"button\">See more</button>\n            </div>`;\n    })\n    .join('');\n}\n\nexport function makeMarkupBook(books) {\n  const markup = books\n    .map(({ _id, book_image, title, author }) => {\n      return ` \n      <li class=\"bestsellers-card-item\" id=\"${_id}\">\n      <a href=\"\" class=\"bestsellers-link project-transit\" id=\"${_id}\"> \n        <!-- box-menu -->\n        <div class=\"bestsellers-box-menu\">\n            <p class = \"bestsellers-overlay\" id=\"${_id}\">Quick View</p>  \n            <img class=\"gallery__image\" src=\"${book_image}\" alt=\"${title}\" id=\"${_id}\">\n            </div>\n         <!-- box-menu -->\n         <div class=\"text-box\">\n          <h3 class=\"book-name\" id=\"${_id}\">${title} </h3>\n          <p class=\"author\" id=\"${_id}\">${author}</p>\n          </div>\n          </a>\n         </li>\n        `;\n    })\n    .join('');\n  return markup;\n}\n\n// ===========================================================================\n\nexport function createAllCategoryList(data, cattegoryName) {\n  refs.bestSellersGalery.innerHTML = `<h2 class=\"bestsellers-title\">${changeColorStyleInTitle(\n    cattegoryName\n  )}</h2>\n                  <div class=\"bestsellers-category-item\" name=\"${cattegoryName}\">\n                  <ul class=\"category-book-list\">\n                 ${makeMarkupBook(data)}\n                  </ul>\n                  </div>`;\n}\n// ===========================================================================\nexport function changeColorStyleInTitle(category) {\n  const titleToArray = category.trim().split(' ');\n  const lastWord = titleToArray[titleToArray.length - 1];\n  const stringExceptLastWord = titleToArray\n    .slice(0, titleToArray.length - 1)\n    .join(' ');\n  const stringFinal =\n    stringExceptLastWord +\n    ` <span class=\"bestsellers-title-span\">${lastWord}</span>`;\n  return stringFinal;\n}\n","import { categoryRequest } from './requests/apiRequests';\nimport { changeColorStyleInTitle, createAllCategoryList } from './bestsellers';\nimport Notiflix from 'notiflix';\n\nconst list = document.querySelector('.category-list');\nconst categoryTitle = document.querySelector('.bestsellers-title');\nconst bestSellersGalery = document.querySelector('.bestsellers');\n\nexport function category() {\n  fetch('https://books-backend.p.goit.global/books/category-list')\n    .then(response => response.json())\n    .then(data => {\n      const arr = [];\n      for (const item of data) {\n        const values = item.list_name;\n        arr.push(values);\n      }\n\n      // console.log(arr);\n\n      const markup = arr\n        .map(item => {\n          return `<li class=\"category-item\">\n        <a class=\"category-link\" href=\"#\">${item}</a>\n        </li>`;\n        })\n        .join('');\n\n      list.insertAdjacentHTML('beforeend', markup);\n      categoryListener();\n    })\n    .catch(error => {\n      console.error('Сталася помилка при запиті:', error);\n    });\n}\n\nfunction categoryListener() {\n  list.addEventListener('click', handleCategoryClick);\n}\n\nfunction handleCategoryClick(event) {\n  event.preventDefault();\n  const target = event.target;\n\n  if (target.classList.contains('category-link')) {\n    const categoryName = target.textContent;\n\n    const categoryItems = document.querySelectorAll('.category-item');\n    categoryItems.forEach(item => {\n      item.classList.remove('active');\n    });\n\n    // Добавление класса 'active' к текущему пункту меню\n    target.parentNode.classList.add('active');\n    if (target.textContent == 'All categories') {\n      location.reload();\n      // categoryTitle.innerHTML = `Best Sellers Books`;\n      // loadTopBooksOnClick();\n    } else {\n      categoryTitle.innerHTML = `${changeColorStyleInTitle(categoryName)}`;\n      try {\n        categoryRequest(categoryName)\n          .then(data => {\n            if (data.length === 0 || data === undefined) {\n              Notiflix.Notify.failure(\n                \"Sorry, we didn't find anything according to your request.\"\n              );\n              return;\n            }\n\n            bestSellersGalery.innerHTML = '';\n            createAllCategoryList(data, categoryName);\n          })\n          .catch(err => console.log(err));\n      } catch (error) {\n        console.log(error.message);\n      }\n    }\n  }\n}\n","import { category } from '../categories';\n\ncategory();\n\nconst refs = {\n  bodyEl: document.querySelector('.main-js'),\n  headerEl: document.querySelector('.header-section'),\n  headerNavLinkEl: document.querySelector('.shopping'),\n  logoLightEl: document.querySelector('.light_icon'),\n  logoDarkEl: document.querySelector('.dark_icon'),\n  titleEl: document.querySelector('.bestsellers-title'),\n  jsCategoryListEl: document.querySelector('.js-category-list'),\n  footerEl: document.querySelector('.footer-js'),\n  logoFooterLightEl: document.querySelector('.light_icon_footer'),\n  logoFooterDarkEl: document.querySelector('.dark_icon_footer'),\n  bookNameEl: document.querySelector('.bestsellers'),\n  aboutTeamEL: document.querySelector('.about-team-window'),\n  aboutBookModalEl: document.querySelector('.about-book-modal'),\n};\n\nconst arrayEl = [\n  refs.bodyEl,\n  refs.headerEl,\n  refs.headerNavLinkEl,\n  refs.logoLightEl,\n  refs.logoDarkEl,\n  refs.titleEl,\n  refs.jsCategoryListEl,\n  refs.footerEl,\n  refs.logoFooterLightEl,\n  refs.logoFooterDarkEl,\n  refs.bookNameEl,\n  refs.aboutTeamEL,\n  refs.aboutBookModalEl,\n];\n\nconst switcherEl = document.querySelector('.js-switch-theme');\n\nconst STORAGE_KEY = 'dark-theme';\n\nswitcherEl.addEventListener('click', onClick);\n\nonLoadDarkTheme();\n\n// Функція для зміни теми сторінки\nfunction onClick() {\n  arrayEl.map(element => element.classList.toggle('dark-theme'));\n\n  if (localStorage.getItem(STORAGE_KEY) === 'true') {\n    localStorage.removeItem(STORAGE_KEY);\n    return;\n  }\n\n  localStorage.setItem(STORAGE_KEY, true);\n}\n\n// Функція для відображення даних зі сховища при перезавантаженні сторінки\nfunction onLoadDarkTheme() {\n  const value = localStorage.getItem(STORAGE_KEY);\n  if (value) {\n    switcherEl.setAttribute('checked', true);\n    arrayEl.map(element => element.classList.add('dark-theme'));\n  }\n}\n"],"names":["$7dm53","parcelRequire","$bpxeT","$a102954a56e30d1d$var$refs","bestSellersGalery","document","querySelector","$a102954a56e30d1d$export$11ea22bc3d4d00db","$a102954a56e30d1d$var$_loadTopBooksOnClick","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","topBooksRequest","then","data","length","undefined","insertAdjacentHTML","$a102954a56e30d1d$export$bf5d47af4cde56bf","$6JpON","Notify","failure","catch","err","console","log","error","message","$a102954a56e30d1d$var$_onCattegoryButtonElClick","event","cattegoryName","target","nodeName","name","categoryRequest","innerHTML","$a102954a56e30d1d$export$461df0cd4992043c","arr","map","param","list_name","books","concat","$a102954a56e30d1d$export$d37bd98c37b31f0d","join","_id","book_image","title","author","$a102954a56e30d1d$export$e69435ba21043376","category","titleToArray","trim","split","lastWord","slice","window","addEventListener","listCategoriesEl","Array","from","querySelectorAll","innerWidth","forEach","item","i","children","hidden","classList","add","Promise","all","$ebCjK","authCheck","loadingElement","layoutElement","remove","$7035cf87bda54340$var$list","$7035cf87bda54340$var$categoryTitle","$7035cf87bda54340$var$bestSellersGalery","$7035cf87bda54340$var$handleCategoryClick","preventDefault","contains","categoryName","textContent","parentNode","location","reload","fetch","response","json","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","values","value","push","return","markup","$f51531819016a311$var$refs","bodyEl","headerEl","headerNavLinkEl","logoLightEl","logoDarkEl","titleEl","jsCategoryListEl","footerEl","logoFooterLightEl","logoFooterDarkEl","bookNameEl","aboutTeamEL","aboutBookModalEl","$f51531819016a311$var$arrayEl","$f51531819016a311$var$switcherEl","$f51531819016a311$var$STORAGE_KEY","element","toggle","localStorage","getItem","removeItem","setItem","setAttribute"],"version":3,"file":"index.52f0dbea.js.map"}