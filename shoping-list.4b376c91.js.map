{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEAC,OAAOC,iBAAiB,oBAAoBC,IACpBC,SAASC,cAAc,WAC/BC,UAAUC,IAAI,cAE5BC,QAAQC,IAAI,EAAC,EAAAV,EAAAW,eAAcC,MAAK,KAC9B,MAAMC,EAAiBR,SAASC,cAAc,eACxCQ,EAAgBT,SAASC,cAAc,WAE7CO,EAAeN,UAAUC,IAAI,wBAC7BM,EAAcP,UAAUQ,OAAO,aAAa,GAC5C,I,sBCZJ,MAAMC,EAAO,CAACC,EAAKC,KACf,IACE,MAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,yBCJ/CC,OAAOC,eAAeC,EAAS,aAAc,CACzCX,OAAO,IAEXW,EAAQC,QACR,SAAyBC,EAAKd,EAAKC,GAC3BD,KAAOc,EACPJ,OAAOC,eAAeG,EAAKd,EAAK,CAC5BC,MAAOA,EACPc,YAAY,EACZC,cAAc,EACdC,UAAU,IAGdH,EAAId,GAAOC,EAEf,OAAOa,C,ECZX,IAAII,EACJ,MAAMC,EAAoB,ICLX,MAaVC,cAAcC,GACXC,KAAKC,UAAYD,KAAKE,cAAcC,iBAAiB,MACrDH,KAAKI,UAAYC,KAAKC,KAAKN,KAAKC,UAAUM,OAASP,KAAKQ,iBAEpDR,KAAKI,UAAY,EACnBJ,KAAKS,2BAIHV,EAAOC,KAAKI,YACdL,EAAOC,KAAKI,WAGdJ,KAAKU,uBACLV,KAAKW,eAAeZ,GACpBC,KAAKY,4BAEL9C,SAASqC,iBAAiB,sBAAsBU,SAAQC,IACtD,MAAMC,EAAYC,OAAOF,EAAOG,aAAa,eACzCF,GACFD,EAAOlD,iBAAiB,SAAS,KAC7BoC,KAAKW,eAAeI,EAAU,GAChC,I,CAyCPH,4BACCZ,KAAKkB,WAAWtD,iBAAiB,SAAS,KACtCoC,KAAKW,eAAeX,KAAKmB,YAAc,EAAE,IAE7CnB,KAAKoB,WAAWxD,iBAAiB,SAAS,KACtCoC,KAAKW,eAAeX,KAAKmB,YAAc,EAAE,G,CAhFjDE,cAuCGC,EAAAhC,EAAA,CAAAU,KAAA,2BAA0B,KACzBA,KAAKuB,oBAAoBC,MAAMC,QAAU,MAAM,IAGhDH,EAAAhC,EAAA,CAAAU,KAAA,wBAAuB,KACtB,IAAK,IAAI0B,EAAI,EAAGA,GAAK1B,KAAKI,UAAWsB,IACjC1B,KAAK2B,iBAAiBD,EAAE,IAI7BJ,EAAAhC,EAAA,CAAAU,KAAA,oBAAmB4B,IAClB,MAAMC,EAAa/D,SAASgE,cAAc,UAC1CD,EAAWE,UAAY,oBACvBF,EAAWG,UAAYJ,EACvBC,EAAWI,aAAa,aAAcL,GACtCC,EAAWI,aAAa,aAAc,QAAUL,GAChD5B,KAAKkC,kBAAkBC,YAAYN,EAAW,IAG/CP,EAAAhC,EAAA,CAAAU,KAAA,kBAAiBoC,IAChBpC,KAAKmB,YAAciB,EAEnBpC,KAAKqC,yBACLrC,KAAKsC,0BAEL,MAAMC,GAAaH,EAAU,GAAKpC,KAAKQ,gBACjCgC,EAAYJ,EAAUpC,KAAKQ,gBAEjCR,KAAKC,UAAUY,SAAQ,CAAC4B,EAAMb,KAC5Ba,EAAKjB,MAAMC,QAAU,OACjBG,GAASW,GAAaX,EAAQY,IAChCC,EAAKjB,MAAMC,QAAU,OAAM,GAE7B,IAYHH,EAAAhC,EAAA,CAAAU,KAAA,0BAAyB,KACxBlC,SAASqC,iBAAiB,sBAAsBU,SAAQC,IACtDA,EAAO9C,UAAUQ,OAAO,UAENwC,OAAOF,EAAOG,aAAa,gBAC5BjB,KAAKmB,aACpBL,EAAO9C,UAAUC,IAAI,SAAS,GAEhC,IAGHqD,EAAAhC,EAAA,CAAAU,KAAA,iBAAgBc,IACfA,EAAO9C,UAAUC,IAAI,YACrB6C,EAAOmB,aAAa,YAAY,EAAK,IAGtCX,EAAAhC,EAAA,CAAAU,KAAA,gBAAec,IACdA,EAAO9C,UAAUQ,OAAO,YACxBsC,EAAO4B,gBAAgB,WAAW,IAGnCpB,EAAAhC,EAAA,CAAAU,KAAA,2BAA0B,KACA,IAArBA,KAAKmB,YACLnB,KAAK2C,cAAc3C,KAAKkB,YAExBlB,KAAK4C,aAAa5C,KAAKkB,YAEvBlB,KAAKI,YAAcJ,KAAKmB,YACxBnB,KAAK2C,cAAc3C,KAAKoB,YAExBpB,KAAK4C,aAAa5C,KAAKoB,WAAW,IAIxCE,EAAAhC,EAAA,CAAAU,KAAA,0BAAyB,KACvBA,KAAKkC,kBAAkBF,UAAY,EAAE,IAtHvChC,KAAKmB,YAAc,EACnBnB,KAAKQ,gBAAkB7C,OAAOkF,OAAOC,OAAS,IAAM,EAAI,EACxD9C,KAAKI,UACLJ,KAAKC,UACLD,KAAKkC,kBAAoBpE,SAASiF,eAAe,sBACjD/C,KAAKE,cAAgBpC,SAASiF,eAAe,kBAC7C/C,KAAKoB,WAAatD,SAASiF,eAAe,eAC1C/C,KAAKkB,WAAapD,SAASiF,eAAe,eAC1C/C,KAAKuB,oBAAsBzD,SAASiF,eAAe,uB,GDHnDC,EAAO,CACXC,mBAAoBnF,SAASC,cAAc,yBAC3CmF,eAAgBpF,SAASC,cAAc,yBAGzCD,SAASF,iBAAiB,oBAAoB,KAO5CgC,EFVa,CAAAlB,IACX,IACE,MAAME,EAAkBG,aAAaoE,QAAQzE,GAC7C,OAA2B,OAApBE,EAA2B,GAAKC,KAAKuE,MAAMxE,E,CAClD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GEKrB,CAAKkE,EAAAC,aAEzBC,KACFC,IAaFR,EAAKE,eAAe1B,MAAMC,QAAU,OAXlC5B,EAAkBC,cAAc,IAEhCD,EAAkBY,yBAbI,IAG1B9C,OAAO8F,SAiHP,WACE,IAAIC,EAAqB/F,OAAOkF,OAAOC,OAAS,IAAM,EAAI,EAGxDS,KACAG,GAAsB7D,EAAkBW,kBAExCX,EAAkBW,gBAAkBkD,EACpCC,I,EA3GJ,MAAMJ,EAAmB,IAChB3D,GAAyBA,EAAsBW,OAAS,EAWjE,SAASiD,IACP,IAAII,EAAchE,EACfiE,KACC,EAACC,IACCA,EAAGC,MACHA,EAAKC,OACLA,EAAMC,WACNA,EAAUC,YACVA,EAAWC,UACXA,EAASC,UACTA,KAKO,WAAWN,gDACFG,WAAoBF,2IAGPA,oEAGXD,uIAIaK,yfAGDH,oHAjBbI,EAAUC,MAAKC,GAAqB,UAAbA,EAAKC,OAAkBC,4FAC/CJ,EAAUC,MAAKC,GAAqB,eAAbA,EAAKC,OAAuBC,2FAChDJ,EAAUC,MAAKC,GAAqB,YAAbA,EAAKC,OAAoBC,gJA2BtEC,KAAK,IACRzB,EAAKC,mBAAmByB,mBAAmB,YAAad,GAKjC9F,SAASqC,iBAAiB,uBAChCU,SAAQyD,GAAQA,EAAK1G,iBAAiB,QAAS+G,I,CAGlE,SAASA,EAAWC,GAClB,MAAMC,EAASD,EAAEE,WAAWC,IAkB9B,SAAoCF,GAClCjF,EAAwBA,EAAsBoF,QAC5CV,GAAQA,EAAKR,MAAQe,IAEvBpG,EAAK4E,EAAAC,YAAa1D,E,CArBlBqF,CAA2BJ,GAwB7B,SAA4BA,GACN/G,SAASiF,eAAe8B,EAAOK,YACvC1G,Q,CAzBZ2G,CAAmBN,GAEftB,IACFI,KA5DFX,EAAKE,eAAe1B,MAAMC,QAAU,QA+DlC5B,EAAkBY,0B,CAItB,SAASkD,IAmBPX,EAAKC,mBAAmBjB,UAAY,GACpCnC,EAAkBuF,yBAlBlB5B,IACA3D,EAAkBC,cAAcD,EAAkBsB,Y,YE7GpD,MAAMkE,EAAO,CACXC,eAAgBxH,SAASC,cAAc,sBAmBnCwH,EAAazH,SAASC,cAAc,oBAI1CwH,EAAW3H,iBAAiB,SAKD,WAGzB,GAFAyH,EAAKC,eAAetH,UAAUwH,OAAO,cAEK,SAAtCzG,aAAaoE,QAVC,cAYhB,YADApE,aAAa0G,WAXG,cAelB1G,aAAaC,QAfK,cAegB,E,IAKpBD,aAAaoE,QApBT,gBAsBhBoC,EAAWtD,aAAa,WAAW,GACnCoD,EAAKC,eAAetH,UAAUC,IAAI","sources":["src/js/services/loadingcheck-shopping-list.js","src/js/services/localstorage-service.js","node_modules/@swc/helpers/lib/_define_property.js","src/js/selected-books.js","src/js/services/pagination-service.js","src/js/services/dark-theme-shopping.js"],"sourcesContent":["import { authCheck } from '../authorization';\n\nwindow.addEventListener('DOMContentLoaded', event => {\n  const layoutElement = document.querySelector('.layout');\n  layoutElement.classList.add('is-loading');\n\n  Promise.all([authCheck()]).then(() => {\n    const loadingElement = document.querySelector('.js-loading');\n    const layoutElement = document.querySelector('.layout');\n\n    loadingElement.classList.add('loading-overlay-hide');\n    layoutElement.classList.remove('is-loading');\n  });\n});\n","const save = (key, value) => {\n    try {\n      const serializedState = JSON.stringify(value);\n      localStorage.setItem(key, serializedState);\n    } catch (error) {\n      console.error('Set state error: ', error.message);\n    }\n  };\n  \n  const load = key => {\n    try {\n      const serializedState = localStorage.getItem(key);\n      return serializedState === null ? [] : JSON.parse(serializedState);\n    } catch (error) {\n      console.error('Get state error: ', error.message);\n    }\n  };\n\n  export { save, load };","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","import { save, load } from './services/localstorage-service';\nimport { STORAGE_KEY } from './about-book';\nimport PaginationService from './services/pagination-service';\n\nlet booksFromLocalStorage;\nconst paginationService = new PaginationService();\n\nconst refs = {\n  sellectedBooksList: document.querySelector('.sellected-books-list'),\n  noBooksSection: document.querySelector('.books-not-available'),\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  InitializeShoppingList();\n});\n\nwindow.onresize = rerenderBooksOnResize;\n\nfunction InitializeShoppingList() {\n  booksFromLocalStorage = load(STORAGE_KEY);\n\n  if (isBooksAvailable()) {\n    renderBooks();\n    hideEmptyMessage();\n    paginationService.setPagination(1);\n  } else {\n    paginationService.hidePaginationContainer();\n  }\n}\n\nconst isBooksAvailable = () => {\n  return booksFromLocalStorage && booksFromLocalStorage.length > 0;\n};\n\nfunction hideEmptyMessage() {\n  refs.noBooksSection.style.display = 'none';\n}\n\nfunction showEmptyMessage() {\n  refs.noBooksSection.style.display = 'block';\n}\n\nfunction renderBooks() {\n  let markupBooks = booksFromLocalStorage\n    .map(\n      ({\n        _id,\n        title,\n        author,\n        book_image,\n        description,\n        list_name,\n        buy_links,\n      }) => {\n        let amazonLink = buy_links.find(book => book.name == 'Amazon').url;\n        let appleLink = buy_links.find(book => book.name == 'Apple Books').url;\n        let bookshopLink = buy_links.find(book => book.name == 'Bookshop').url;\n        return `<li id=\"${_id}\" class=\"book-item\">\n            <img src=\"${book_image}\" alt=\"${title}\" class=\"book-image\" />\n            <div class=\"book-info\">\n            <div class=\"book-style\">\n            <h2 class=\"book-title\">${title}</h2>\n            \n            <div>\n            <button id=\"${_id}\" class=\"delete-book-button\"></button>\n            </div>\n            </div>\n            \n            <p class=\"book-category\">${list_name}</p>\n            <p class=\"book-description\">A scientist and single mother living in California in the 1960s becomes a star on a TV cooking show. Read by Miranda Raison, Pandora Sykes and the author. 11 hours, 55 minutes unabridged.A scientist and single mother living in California in the 1960s becomes a star on a TV cooking show. Read by Miranda Raison, Pandora Sykes and the author. 11 hours, 55 minutes unabridged.</p>\n            <div class=\"book-styles\">\n            <h3 class=\"book-author\">${author}</h3>\n            <div class=\"trading-platforms-list list\">\n            <a href=\"\"></a>\n            <a href=\"${amazonLink}\" class=\"amazon\" target=\"_blank\" rel=\"noreferrer noopener\"></a>\n            <a href=\"${appleLink}\" class=\"apple\" target=\"_blank\" rel=\"noreferrer noopener\"></a>\n            <a href=\"${bookshopLink}\" class=\"shop\" target=\"_blank\" rel=\"noreferrer noopener\"></a>\n            </div>\n            </div>\n            </div>\n        </li>`;\n      }\n    )\n    .join('');\n  refs.sellectedBooksList.insertAdjacentHTML('beforeend', markupBooks);\n  bindDeleteButtonsEvents();\n}\n\nfunction bindDeleteButtonsEvents() {\n  let deleteButtonRefs = document.querySelectorAll('.delete-book-button');\n  deleteButtonRefs.forEach(book => book.addEventListener('click', deleteBook));\n}\n\nfunction deleteBook(e) {\n  const bookId = e.srcElement.id;\n  deleteBookFromLocalStorage(bookId);\n  deleteBookFromList(bookId);\n\n  if (isBooksAvailable()) {\n    rerenderBooks();\n  } else {\n    showEmptyMessage();\n    paginationService.hidePaginationContainer();\n  }\n}\n\nfunction rerenderBooks() {\n  clearPage();\n  renderBooks();\n  paginationService.setPagination(paginationService.currentPage);\n}\n\nfunction deleteBookFromLocalStorage(bookId) {\n  booksFromLocalStorage = booksFromLocalStorage.filter(\n    book => book._id !== bookId\n  );\n  save(STORAGE_KEY, booksFromLocalStorage);\n}\n\nfunction deleteBookFromList(bookId) {\n  const bookElement = document.getElementById(bookId.toString());\n  bookElement.remove();\n}\n\nfunction clearPage() {\n  refs.sellectedBooksList.innerHTML = '';\n  paginationService.clearPaginationButtons();\n}\n\nfunction rerenderBooksOnResize() {\n  let newPaginationLimit = window.screen.width >= 768 ? 3 : 4;\n\n  if (\n    isBooksAvailable() &&\n    newPaginationLimit != paginationService.paginationLimit\n  ) {\n    paginationService.paginationLimit = newPaginationLimit;\n    rerenderBooks();\n  }\n}\n","export default class PaginationService {\n    constructor() {\n      this.currentPage = 1;\n      this.paginationLimit = window.screen.width >= 768 ? 3 : 4;;\n      this.pageCount;\n      this.listItems;\n      this.paginationNumbers = document.getElementById('pagination-numbers');\n      this.paginatedList = document.getElementById('paginated-list');\n      this.nextButton = document.getElementById('next-button');\n      this.prevButton = document.getElementById('prev-button');\n      this.paginationContainer = document.getElementById('pagination-container');\n    }\n\n     setPagination(page) {\n        this.listItems = this.paginatedList.querySelectorAll('li');\n        this.pageCount = Math.ceil(this.listItems.length / this.paginationLimit);\n      \n        if (this.pageCount < 2) {\n          this.hidePaginationContainer();\n          return;\n        }\n      \n        if (page > this.pageCount) {\n          page = this.pageCount;\n        }\n      \n        this.getPaginationNumbers();\n        this.setCurrentPage(page);\n        this.setNextAndPreviousButtons();\n      \n        document.querySelectorAll('.pagination-number').forEach(button => {\n          const pageIndex = Number(button.getAttribute('page-index'));\n          if (pageIndex) {\n            button.addEventListener('click', () => {\n                this.setCurrentPage(pageIndex);\n            });\n          }\n        });\n      }\n      \n       hidePaginationContainer = () => {\n        this.paginationContainer.style.display = 'none';\n      }\n      \n       getPaginationNumbers = () => {\n        for (let i = 1; i <= this.pageCount; i++) {\n            this.appendPageNumber(i);\n        }\n      };\n      \n       appendPageNumber = index => {\n        const pageNumber = document.createElement('button');\n        pageNumber.className = 'pagination-number';\n        pageNumber.innerHTML = index;\n        pageNumber.setAttribute('page-index', index);\n        pageNumber.setAttribute('aria-label', 'Page ' + index);\n        this.paginationNumbers.appendChild(pageNumber);\n      };\n      \n       setCurrentPage = pageNum => {\n        this.currentPage = pageNum;\n      \n        this.handleActivePageNumber();\n        this.handlePageButtonsStatus();\n      \n        const prevRange = (pageNum - 1) * this.paginationLimit;\n        const currRange = pageNum * this.paginationLimit;\n      \n        this.listItems.forEach((item, index) => {\n          item.style.display = 'none';\n          if (index >= prevRange && index < currRange) {\n            item.style.display = 'flex';\n          }\n        });\n      };\n      \n       setNextAndPreviousButtons() {\n        this.prevButton.addEventListener('click', () => {\n            this.setCurrentPage(this.currentPage - 1);\n        });\n        this.nextButton.addEventListener('click', () => {\n            this.setCurrentPage(this.currentPage + 1);\n        });\n      }\n      \n       handleActivePageNumber = () => {\n        document.querySelectorAll('.pagination-number').forEach(button => {\n          button.classList.remove('active');\n      \n          const pageIndex = Number(button.getAttribute('page-index'));\n          if (pageIndex == this.currentPage) {\n            button.classList.add('active');\n          }\n        });\n      };\n      \n       disableButton = button => {\n        button.classList.add('disabled');\n        button.setAttribute('disabled', true);\n      };\n      \n       enableButton = button => {\n        button.classList.remove('disabled');\n        button.removeAttribute('disabled');\n      };\n      \n       handlePageButtonsStatus = () => {\n        if (this.currentPage === 1) {\n            this.disableButton(this.prevButton);\n        } else {\n            this.enableButton(this.prevButton);\n        }\n        if (this.pageCount === this.currentPage) {\n            this.disableButton(this.nextButton);\n        } else {\n            this.enableButton(this.nextButton);\n        }\n      };   \n      \n      clearPaginationButtons = () => {\n        this.paginationNumbers.innerHTML = '';\n      };\n  }\n","const refs = {\n  bodyShoppingEl: document.querySelector('.shopping-dark-js'),\n};\n\n// const arrayEl = [\n//   refs.bodyEl,\n//   refs.headerEl,\n//   refs.headerNavLinkEl,\n//   refs.logoLightEl,\n//   refs.logoDarkEl,\n//   refs.titleEl,\n//   refs.jsCategoryListEl,\n//   refs.footerEl,\n//   refs.logoFooterLightEl,\n//   refs.logoFooterDarkEl,\n//   refs.bookNameEl,\n//   refs.aboutTeamEL,\n//   refs.aboutBookModalEl,\n// ];\n\nconst switcherEl = document.querySelector('.js-switch-theme');\n\nconst STORAGE_KEY = 'dark-theme';\n\nswitcherEl.addEventListener('click', onClick);\n\nonLoadDarkTheme();\n\n// Функція для зміни теми сторінки\nfunction onClick() {\n  refs.bodyShoppingEl.classList.toggle('dark-theme');\n\n  if (localStorage.getItem(STORAGE_KEY) === 'true') {\n    localStorage.removeItem(STORAGE_KEY);\n    return;\n  }\n\n  localStorage.setItem(STORAGE_KEY, true);\n}\n\n// Функція для відображення даних зі сховища при перезавантаженні сторінки\nfunction onLoadDarkTheme() {\n  const value = localStorage.getItem(STORAGE_KEY);\n  if (value) {\n    switcherEl.setAttribute('checked', true);\n    refs.bodyShoppingEl.classList.add('dark-theme');\n  }\n}\n"],"names":["$czhBR","parcelRequire","window","addEventListener","event","document","querySelector","classList","add","Promise","all","authCheck","then","loadingElement","layoutElement","remove","$66c88e9a6dfb877c$export$a1544dad697b423d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","Object","defineProperty","$da4b248c00322402$exports","default","obj","enumerable","configurable","writable","$b96a0cc6b3eea506$var$booksFromLocalStorage","$b96a0cc6b3eea506$var$paginationService","setPagination","page","this","listItems","paginatedList","querySelectorAll","pageCount","Math","ceil","length","paginationLimit","hidePaginationContainer","getPaginationNumbers","setCurrentPage","setNextAndPreviousButtons","forEach","button","pageIndex","Number","getAttribute","prevButton","currentPage","nextButton","constructor","$parcel$interopDefault","paginationContainer","style","display","i","appendPageNumber","index","pageNumber","createElement","className","innerHTML","setAttribute","paginationNumbers","appendChild","pageNum","handleActivePageNumber","handlePageButtonsStatus","prevRange","currRange","item","removeAttribute","disableButton","enableButton","screen","width","getElementById","$b96a0cc6b3eea506$var$refs","sellectedBooksList","noBooksSection","getItem","parse","$khW4t","STORAGE_KEY","$b96a0cc6b3eea506$var$isBooksAvailable","$b96a0cc6b3eea506$var$renderBooks","onresize","newPaginationLimit","$b96a0cc6b3eea506$var$rerenderBooks","markupBooks","map","_id","title","author","book_image","description","list_name","buy_links","find","book","name","url","join","insertAdjacentHTML","$b96a0cc6b3eea506$var$deleteBook","e","bookId","srcElement","id","filter","$b96a0cc6b3eea506$var$deleteBookFromLocalStorage","toString","$b96a0cc6b3eea506$var$deleteBookFromList","clearPaginationButtons","$40d2b5f8688e947f$var$refs","bodyShoppingEl","$40d2b5f8688e947f$var$switcherEl","toggle","removeItem"],"version":3,"file":"shoping-list.4b376c91.js.map"}