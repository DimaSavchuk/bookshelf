{"mappings":"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","sources":["src/shoping-list.js","src/js/partials/shoping-list/selected-books.js"],"sourcesContent":["import './js/modals/authorization';\n\nimport './js/partials/header';\nimport './js/partials/support';\nimport './js/partials/shoping-list/selected-books';\nimport './js/partials/footer';\n\nimport './js/modals/about-book';","import axios from 'axios';\n //import { save, load } from './localStorageService.js';\n\nconst API_URL = 'https://books-backend.p.goit.global/books/top-books';\nconst SHOPPING_LIST_LOCAL_STORAGE_KEY = 'ShoppingList';\nlet booksFromLocalStorage;\n\nconst refs = {\n    sellectedBooksList: document.querySelector('.sellected-books-list'),\n    noBooksSection: document.querySelector('.books-not-available'),\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    // Only for test\n    InitializeShoppingListTest();\n\n    InitializeShoppingList();\n  });\n\n  function InitializeShoppingList()\n  {\n    booksFromLocalStorage = load(SHOPPING_LIST_LOCAL_STORAGE_KEY);\n\n    if(booksFromLocalStorage && booksFromLocalStorage.length > 0){\n        renderBooks(booksFromLocalStorage);\n        hideEmptyMessage();\n    }\n  }\n\n  function hideEmptyMessage(){\n    refs.noBooksSection.style.display = 'none';\n  }\n\n  function showEmptyMessage(){\n    refs.noBooksSection.style.display = 'block';\n  }\n\n  function renderBooks(books) {\n    let markupBooks = books.map(\n        ({\n            _id,\n            title,\n            author,\n            book_image,\n            description,\n            list_name,\n            buy_links,\n    }) => {\n        let amazonLink = buy_links.find(book => book.name == 'Amazon').url;\n        let appleLink = buy_links.find(book => book.name == 'Apple Books').url;\n        let bookshopLink = buy_links.find(book => book.name == 'Bookshop').url;\n        return `<li id=\"${_id}\" class=\"book-item\">\n            <img src=\"${book_image}\" alt=\"${title}\" class=\"book-image\" />\n            <div class=\"book-info\">\n            <div class=\"book-style\">\n            <h2 class=\"book-title\">${title}</h2>\n            \n            <div>\n            <button id=\"${_id}\" class=\"delete-book-button\"></button>\n            </div>\n            </div>\n            \n            <p class=\"book-category\">${list_name}</p>\n            <p class=\"book-description\">David Burroughs was once a devoted father to his three-year-old son Matthew, living a dream life just a short drive away from the working-class suburb where he and his wife, Cheryl, first fell in love--until one fateful night when David woke suddenly to discover Matthew had been murdered while David was asleep just down the hall.</p>\n            <div class=\"book-styles\">\n            <h3 class=\"book-author\">${author}</h3>\n            <div class=\"trading-platforms-list list\">\n            <a href=\"\"></a>\n            <a href=\"${amazonLink}\" class=\"amazon\"></a>\n            <a href=\"${appleLink}\" class=\"apple\"></a>\n            <a href=\"${bookshopLink}\" class=\"shop\"></a>\n            </div>\n            </div>\n            </div>\n        </li>`\n    })\n    .join('');\n   refs.sellectedBooksList.insertAdjacentHTML('beforeend', markupBooks);\n   bindDeleteButtonsEvents();\n  }\n\n  function bindDeleteButtonsEvents(){\n    let deleteButtonRefs = document.querySelectorAll('.delete-book-button');\n    deleteButtonRefs.forEach(book => book.addEventListener('click', deleteBook));\n  }\n\n  function deleteBook(e){\n    const bookId = e.srcElement.id;\n    deleteBookFromLocalStorage(bookId);\n    deleteBookFromList(bookId);\n\n    if(!booksFromLocalStorage || booksFromLocalStorage.length < 1) {\n        showEmptyMessage();\n    }\n  }\n\n  function deleteBookFromLocalStorage(bookId){\n    booksFromLocalStorage = booksFromLocalStorage.filter(book => book._id !== bookId);\n    save(SHOPPING_LIST_LOCAL_STORAGE_KEY, booksFromLocalStorage);\n  }\n\n  function deleteBookFromList(bookId){\n    const bookElement = document.getElementById(bookId.toString());\n    bookElement.style.display = 'none';\n  }\n\n  // Only for test\nasync function InitializeShoppingListTest() {\n    \n      try {\n        let mappedBookList;\n        const response = await axios.get(`${API_URL}`);\n        if(response && response.data)\n        {\n            let bookslist = response.data[0].books;\n            mappedBookList = bookslist.map(({\n                _id,\n                title,\n                author,\n                book_image,\n                description,\n                list_name,\n                buy_links,\n            }) =>  ({ _id, title, author, book_image, description, list_name, buy_links }));\n        }\n        console.log(mappedBookList);\n\n        if(mappedBookList && mappedBookList.length > 0) {\n            save(SHOPPING_LIST_LOCAL_STORAGE_KEY, mappedBookList);\n        }\n\n        return response.data;\n      } catch (error) {\n         console.error(error.toJSON());\n      }\n    }\n\n//LocalStorageService\nconst save = (key, value) => {\n    try {\n      const serializedState = JSON.stringify(value);\n      localStorage.setItem(key, serializedState);\n    } catch (error) {\n      console.error(\"Set state error: \", error.message);\n    }\n  };\n  \n  const load = key => {\n    try {\n      const serializedState = localStorage.getItem(key);\n      return serializedState === null ? undefined : JSON.parse(serializedState);\n    } catch (error) {\n      console.error(\"Get state error: \", error.message);\n    }\n  };\n// --------------------------\n\n//  let text = 'это вопрос религии, или объективные причины есть? =) Для некого универсального плагина,...';\n \n// let sliced = text.slice(0, 15);\n// if (sliced.length < text.length) {\n// sliced += '...';\n// }\n// console.log(sliced);\n\n\n\n\n"],"names":["parcelRequire","$d7c4621ffac89723$var$booksFromLocalStorage","$bpxeT","$d7c4621ffac89723$var$API_URL","$d7c4621ffac89723$var$SHOPPING_LIST_LOCAL_STORAGE_KEY","$d7c4621ffac89723$var$refs","sellectedBooksList","document","querySelector","noBooksSection","$d7c4621ffac89723$var$deleteBook","e","bookId","srcElement","id","filter","book","_id","$d7c4621ffac89723$var$save","$d7c4621ffac89723$var$deleteBookFromLocalStorage","getElementById","toString","style","display","$d7c4621ffac89723$var$deleteBookFromList","length","$d7c4621ffac89723$var$_InitializeShoppingListTest","$parcel$interopDefault","$2TvXO","mark","_callee","mappedBookList","response","bookslist","$dIxxU","default","get","concat","_ctx","sent","data","books","map","param","title","author","book_image","description","list_name","buy_links","console","log","error","t0","toJSON","apply","this","arguments","addEventListener","markupBooks","$d7c4621ffac89723$var$InitializeShoppingListTest","$d7c4621ffac89723$var$load","amazonLink","find","name","url","appleLink","bookshopLink","join","insertAdjacentHTML","querySelectorAll","forEach","key","value","serializedState","JSON","stringify","localStorage","setItem","message","getItem","undefined","parse"],"version":3,"file":"shoping-list.4fc75a1d.js.map"}