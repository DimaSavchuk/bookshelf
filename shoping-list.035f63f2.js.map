{"mappings":"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","sources":["src/js/services/loadingcheck-shopping-list.js","src/js/partials/shoping-list/selected-books.js"],"sourcesContent":["import { authCheck } from '../modals/authorization';\n\n\nwindow.addEventListener('DOMContentLoaded', event => {\n  const layoutElement = document.querySelector('.layout');\n  layoutElement.classList.add('is-loading');\n\n  Promise.all([authCheck()]).then(\n    () => {\n      const loadingElement = document.querySelector('.js-loading');\n      const layoutElement = document.querySelector('.layout');\n\n      loadingElement.classList.add('loading-overlay-hide');\n      layoutElement.classList.remove('is-loading');\n    }\n  );\n});\n","import axios from 'axios';\n//import { save, load } from './localStorageService.js';\nimport { STORAGE_KEY } from '../../modals/about-book';\n\nconst API_URL = 'https://books-backend.p.goit.global/books/top-books';\nconst SHOPPING_LIST_LOCAL_STORAGE_KEY = 'ShoppingList';\nlet booksFromLocalStorage;\n\nconst refs = {\n  sellectedBooksList: document.querySelector('.sellected-books-list'),\n  noBooksSection: document.querySelector('.books-not-available'),\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Only for test\n  // InitializeShoppingListTest();\n\n  InitializeShoppingList();\n});\n\nfunction InitializeShoppingList() {\n  booksFromLocalStorage = load(STORAGE_KEY);\n\n  if (booksFromLocalStorage && booksFromLocalStorage.length > 0) {\n    renderBooks(booksFromLocalStorage);\n    hideEmptyMessage();\n    setPagination();\n  } else {\n    paginationContainer.style.display = 'none';\n  }\n}\n\nfunction hideEmptyMessage() {\n  refs.noBooksSection.style.display = 'none';\n}\n\nfunction showEmptyMessage() {\n  refs.noBooksSection.style.display = 'block';\n}\n\nfunction renderBooks(books) {\n  let markupBooks = books\n    .map(\n      ({\n        _id,\n        title,\n        author,\n        book_image,\n        description,\n        list_name,\n        buy_links,\n      }) => {\n        let amazonLink = buy_links.find(book => book.name == 'Amazon').url;\n        let appleLink = buy_links.find(book => book.name == 'Apple Books').url;\n        let bookshopLink = buy_links.find(book => book.name == 'Bookshop').url;\n        return `<li id=\"${_id}\" class=\"book-item\">\n            <img src=\"${book_image}\" alt=\"${title}\" class=\"book-image\" />\n            <div class=\"book-info\">\n            <div class=\"book-style\">\n            <h2 class=\"book-title\">${title}</h2>\n            \n            <div>\n            <button id=\"${_id}\" class=\"delete-book-button\"></button>\n            </div>\n            </div>\n            \n            <p class=\"book-category\">${list_name}</p>\n            <p class=\"book-description\">David Burroughs was once a devoted father to his three-year-old son Matthew, living a dream life just a short drive away from the working-class suburb where he and his wife, Cheryl, first fell in love--until one fateful night when David woke suddenly to discover Matthew had been murdered while David was asleep just down the hall.</p>\n            <div class=\"book-styles\">\n            <h3 class=\"book-author\">${author}</h3>\n            <div class=\"trading-platforms-list list\">\n            <a href=\"\"></a>\n            <a href=\"${amazonLink}\" class=\"amazon\"></a>\n            <a href=\"${appleLink}\" class=\"apple\"></a>\n            <a href=\"${bookshopLink}\" class=\"shop\"></a>\n            </div>\n            </div>\n            </div>\n        </li>`;\n      }\n    )\n    .join('');\n  refs.sellectedBooksList.insertAdjacentHTML('beforeend', markupBooks);\n  bindDeleteButtonsEvents();\n}\n\nfunction bindDeleteButtonsEvents() {\n  let deleteButtonRefs = document.querySelectorAll('.delete-book-button');\n  deleteButtonRefs.forEach(book => book.addEventListener('click', deleteBook));\n}\n\nfunction deleteBook(e) {\n  const bookId = e.srcElement.id;\n  deleteBookFromLocalStorage(bookId);\n  deleteBookFromList(bookId);\n\n  if (!booksFromLocalStorage || booksFromLocalStorage.length < 1) {\n    showEmptyMessage();\n    paginationContainer.style.display = 'none';\n  } else {\n    recalculatePages();\n  }\n}\n\nfunction deleteBookFromLocalStorage(bookId) {\n  booksFromLocalStorage = booksFromLocalStorage.filter(\n    book => book._id !== bookId\n  );\n  save(SHOPPING_LIST_LOCAL_STORAGE_KEY, booksFromLocalStorage);\n}\n\nfunction deleteBookFromList(bookId) {\n  const bookElement = document.getElementById(bookId.toString());\n  bookElement.remove();\n}\n\n// Only for test\n// async function InitializeShoppingListTest() {\n\n//       try {\n//         let mappedBookList;\n//         const response = await axios.get(`${API_URL}`);\n//         if(response && response.data)\n//         {\n//             let bookslist = response.data[0].books;\n//             mappedBookList = bookslist.map(({\n//                 _id,\n//                 title,\n//                 author,\n//                 book_image,\n//                 description,\n//                 list_name,\n//                 buy_links,\n//             }) =>  ({ _id, title, author, book_image, description, list_name, buy_links }));\n//         }\n//         console.log(mappedBookList);\n\n//         if(mappedBookList && mappedBookList.length > 0) {\n//             save(SHOPPING_LIST_LOCAL_STORAGE_KEY, mappedBookList);\n//         }\n\n//         return response.data;\n//       } catch (error) {\n//          console.error(error.toJSON());\n//       }\n//     }\n\n//LocalStorageService\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n// --------------------------\n\n//  let text = 'это вопрос религии, или объективные причины есть? =) Для некого универсального плагина,...';\n\n// let sliced = text.slice(0, 15);\n// if (sliced.length < text.length) {\n// sliced += '...';\n// }\n// console.log(sliced);\n\n//    Pagination\nconst paginationNumbers = document.getElementById('pagination-numbers');\nconst paginatedList = document.getElementById('paginated-list');\nconst nextButton = document.getElementById('next-button');\nconst prevButton = document.getElementById('prev-button');\nconst paginationContainer = document.getElementById('pagination-container');\nlet listItems;\nconst paginationLimit = 3;\nlet pageCount;\nlet currentPage;\n\nfunction setPagination() {\n  listItems = paginatedList.querySelectorAll('li');\n  pageCount = Math.ceil(listItems.length / paginationLimit);\n\n  if (pageCount < 2) {\n    paginationContainer.style.display = 'none';\n    return;\n  }\n\n  getPaginationNumbers();\n  setCurrentPage(1);\n  setNextAndPreviousButtons();\n\n  document.querySelectorAll('.pagination-number').forEach(button => {\n    const pageIndex = Number(button.getAttribute('page-index'));\n    if (pageIndex) {\n      button.addEventListener('click', () => {\n        setCurrentPage(pageIndex);\n      });\n    }\n  });\n}\n\nconst getPaginationNumbers = () => {\n  for (let i = 1; i <= pageCount; i++) {\n    appendPageNumber(i);\n  }\n};\n\nconst appendPageNumber = index => {\n  const pageNumber = document.createElement('button');\n  pageNumber.className = 'pagination-number';\n  pageNumber.innerHTML = index;\n  pageNumber.setAttribute('page-index', index);\n  pageNumber.setAttribute('aria-label', 'Page ' + index);\n  paginationNumbers.appendChild(pageNumber);\n};\n\nconst setCurrentPage = pageNum => {\n  currentPage = pageNum;\n\n  handleActivePageNumber();\n  handlePageButtonsStatus();\n\n  const prevRange = (pageNum - 1) * paginationLimit;\n  const currRange = pageNum * paginationLimit;\n\n  listItems.forEach((item, index) => {\n    item.style.display = 'none';\n    if (index >= prevRange && index < currRange) {\n      item.style.display = 'flex';\n    }\n  });\n};\n\nfunction setNextAndPreviousButtons() {\n  prevButton.addEventListener('click', () => {\n    setCurrentPage(currentPage - 1);\n  });\n  nextButton.addEventListener('click', () => {\n    setCurrentPage(currentPage + 1);\n  });\n}\n\nconst handleActivePageNumber = () => {\n  document.querySelectorAll('.pagination-number').forEach(button => {\n    button.classList.remove('active');\n\n    const pageIndex = Number(button.getAttribute('page-index'));\n    if (pageIndex == currentPage) {\n      button.classList.add('active');\n    }\n  });\n};\n\nconst disableButton = button => {\n  button.classList.add('disabled');\n  button.setAttribute('disabled', true);\n};\n\nconst enableButton = button => {\n  button.classList.remove('disabled');\n  button.removeAttribute('disabled');\n};\n\nconst handlePageButtonsStatus = () => {\n  if (currentPage === 1) {\n    disableButton(prevButton);\n  } else {\n    enableButton(prevButton);\n  }\n  if (pageCount === currentPage) {\n    disableButton(nextButton);\n  } else {\n    enableButton(nextButton);\n  }\n};\n\nconst recalculatePages = () => {\n  paginationNumbers.innerHTML = '';\n  listItems = paginatedList.querySelectorAll('li');\n  pageCount = Math.ceil(listItems.length / paginationLimit);\n\n  if (pageCount < 2) {\n    paginationContainer.style.display = 'none';\n\n    return;\n  }\n\n  if (currentPage > pageCount) {\n    currentPage = pageCount;\n  }\n\n  getPaginationNumbers();\n  setCurrentPage(currentPage);\n  setNextAndPreviousButtons();\n\n  document.querySelectorAll('.pagination-number').forEach(button => {\n    const pageIndex = Number(button.getAttribute('page-index'));\n    if (pageIndex) {\n      button.addEventListener('click', () => {\n        setCurrentPage(pageIndex);\n      });\n      console.log(setCurrentPage(pageIndex));\n    }\n  });\n};\n\n// window.addEventListener(\"load\", () => {\n//   getPaginationNumbers();\n// });\n\n// jsonData.forEach((item, index) => {\n//   elementContainer.innerHTML = ''\n//   if (index >= prevRange && index < currRange) {\n//     elementContainer.appendChild(item)\n//   }\n// });\n\n// window.addEventListener(\"load\", () => {\n\n// });\n\n// ONO EST\n// const setCurrentPage = (pageNum) => {\n//   currentPage = pageNum;\n// };\n\n// const setCurrentPage = (pageNum) => {\n//   currentPage = pageNum;\n\n//   const prevRange = (pageNum - 1) * paginationLimit;\n//   const currRange = pageNum * paginationLimit;\n// };\n\n// const setCurrentPage = (pageNum) => {\n//   currentPage = pageNum;\n\n//   const prevRange = (pageNum - 1) * paginationLimit;\n//   const currRange = pageNum * paginationLimit;\n//   listItems.forEach((item, index) => {\n//     item.classList.add(\"hidden\");\n//     if (index >= prevRange && index < currRange) {\n//       item.classList.remove(\"hidden\");\n//     }\n//   });\n// };\n// window.addEventListener(\"load\", () => {\n//   getPaginationNumbers();\n//   setCurrentPage(1);\n// });\n"],"names":["$kZtGT","parcelRequire","window","addEventListener","event","document","querySelector","classList","add","Promise","all","authCheck","then","loadingElement","layoutElement","remove","$d7c4621ffac89723$var$booksFromLocalStorage","$d7c4621ffac89723$var$SHOPPING_LIST_LOCAL_STORAGE_KEY","$d7c4621ffac89723$var$refs","sellectedBooksList","noBooksSection","$d7c4621ffac89723$var$deleteBook","e","bookId","srcElement","id","filter","book","_id","$d7c4621ffac89723$var$save","$d7c4621ffac89723$var$deleteBookFromLocalStorage","getElementById","toString","$d7c4621ffac89723$var$deleteBookFromList","length","style","display","$d7c4621ffac89723$var$paginationContainer","$d7c4621ffac89723$var$recalculatePages","markupBooks","$d7c4621ffac89723$var$load","$79s99","STORAGE_KEY","map","param","title","author","book_image","list_name","description","buy_links","amazonLink","find","name","url","appleLink","bookshopLink","concat","join","insertAdjacentHTML","querySelectorAll","forEach","$d7c4621ffac89723$var$listItems","$d7c4621ffac89723$var$paginatedList","$d7c4621ffac89723$var$pageCount","Math","ceil","$d7c4621ffac89723$var$getPaginationNumbers","$d7c4621ffac89723$var$setCurrentPage","$d7c4621ffac89723$var$setNextAndPreviousButtons","button","pageIndex","Number","getAttribute","$d7c4621ffac89723$var$currentPage","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","$d7c4621ffac89723$var$paginationNumbers","$d7c4621ffac89723$var$nextButton","$d7c4621ffac89723$var$prevButton","i","$d7c4621ffac89723$var$appendPageNumber","index","pageNumber","createElement","className","innerHTML","setAttribute","appendChild","pageNum","$d7c4621ffac89723$var$handleActivePageNumber","$d7c4621ffac89723$var$handlePageButtonsStatus","prevRange","currRange","item","$d7c4621ffac89723$var$disableButton","$d7c4621ffac89723$var$enableButton","removeAttribute","log"],"version":3,"file":"shoping-list.035f63f2.js.map"}